@import "./basic.scss";

@media only screen and (max-width: 400px) {
    body {
        font-size: 17px;

        h1,
        h2 {
            font-size: 1.2em !important;
        }
    }
}

main {
    #main-wrap {
        height: fit-content;
        width: 100%;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax($dim, 1fr));
        grid-template-rows: repeat(auto-fit, $dim);
        margin: $padding;

        article {
            height: $dim;
            box-sizing: border-box;
            display: flex;
            justify-content: flex-end;
            flex-direction: column;
            padding: $padding;
            position: relative;

            &:hover,
            &#lead-story:hover {
                .preview {
                    background-color: #fff;
                }
            }

            &.no-image,
            &#lead-story {
                align-items: center;
                justify-content: center;

                .preview {
                    max-width: 85%;
                    width: fit-content;
                    position: relative;
                    top: 0;
                    left: 0;
                    text-align: center;
                }
            }

            &.no-image {
                .preview {
                    background-color: transparent;
                    border: 0;
                    box-shadow: none;
                }
            }

            &#lead-story {
                height: 2 * $dim;
                grid-column-start: 1;
                grid-column-end: 3;
                grid-row-start: 1;
                grid-row-end: 3;

                .preview {
                    h2 {
                        font-size: 1.6em;
                        line-height: 1.25em;
                    }

                    h3 {
                        font-size: 1.3em;
                        margin: 15px auto;
                    }
                }
            }

            a.box-link {
                height: calc(100% - 2 * var(--padding));
                width: calc(100% - 2 * var(--padding));
                background-position: center;
                background-size: cover;
                display: block;
                position: absolute;
            }

            .preview {
                width: 85%;
                background-color: rgba(255, 244, 236, 0.96);
                border: 1px solid #aaa;
                box-shadow: 5px 5px 3px rgba(0, 0, 0, 0.4);
                box-sizing: border-box;
                padding: $padding;
                position: absolute;
                top: $padding;
                left: $padding;

                & > * {
                    font-size: 1em;
                    margin: 0;
                }

                .sutta-name,
                .date,
                .tags {
                    font-size: 0.95em;
                }

                .sutta-name {
                    font-weight: bold;
                    margin: 5px 0;
                }

                .date,
                .tags {
                    margin: 5px 0 0;
                }

                .date {
                    font-style: italic;
                }

                .tags {
                    box-sizing: border-box;
                    font-weight: bold;
                }
            }
        }
    }
}

@media only screen and (max-width: (4 * $dim + $extra)) {
    main {
        #main-wrap {
            &:not(.wrap-1):not(.wrap-2) {
                max-width: (3 * $dim) !important;
            }

            grid-template-columns: repeat(3, minmax($dim, 1fr));
        }
    }
}

@media only screen and (max-width: (3 * $dim + $extra)) {
    main {
        #main-wrap {
            max-width: (2 * $dim) !important;
            grid-template-columns: repeat(2, minmax($dim, 1fr));
        }
    }
}

@media only screen and (max-width: (2 * $dim + $extra)) {
    main {
        #main-wrap {
            display: initial;

            article {
                $width: calc(100vw - 2 * var(--padding));

                &,
                &#lead-story {
                    height: fit-content;
                    width: $width;
                }

                &#lead-story {
                    min-height: calc(1.5 * $width);
                }

                &:not(#lead-story) {
                    min-height: $width;
                }
            }
        }
    }
}
